<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <h2>ğŸ“ Inscription BÃ©nÃ©vole</h2>
    </div>

    @if (successMessage) {
      <div class="alert alert-success">
        âœ… {{ successMessage }}
      </div>
    }

    @if (errorMessage) {
      <div class="alert alert-error">
        âš ï¸ {{ errorMessage }}
      </div>
    }

    <form [formGroup]="volunteerForm" (ngSubmit)="onSubmit()" class="register-form">

      <div class="form-group">
        <label for="firstname">ğŸ‘¤ PrÃ©nom</label>
        <input
          type="text"
          id="firstname"
          formControlName="firstname"
          placeholder="PrÃ©nom"
          [disabled]="isSubmitting"
        />
        @if (volunteerForm.get('firstname')?.invalid && volunteerForm.get('firstname')?.touched) {
          <span class="error-text">Le prÃ©nom est requis</span>
        }
      </div>

      <div class="form-group">
        <label for="lastname">ğŸ‘¤ Nom</label>
        <input
          type="text"
          id="lastname"
          formControlName="lastname"
          placeholder="Nom"
          [disabled]="isSubmitting"
        />
        @if (volunteerForm.get('lastname')?.invalid && volunteerForm.get('lastname')?.touched) {
          <span class="error-text">Le nom est requis</span>
        }
      </div>

      <div class="form-group">
        <label for="location">ğŸ“ Localisation</label>
        <select
          id="location"
          formControlName="location"
          [disabled]="isSubmitting"
        >
          <option value="">-- SÃ©lectionnez une ville --</option>
          <option value="Paris">Paris</option>
          <option value="Nantes">Nantes</option>
          <option value="Lyon">Lyon</option>
          <option value="BesanÃ§on">BesanÃ§on</option>
          <option value="Saintes">Saintes</option>
          <option value="Marseille">Marseille</option>
          <option value="Bordeaux">Bordeaux</option>
          <option value="Toulouse">Toulouse</option>
        </select>
        @if (volunteerForm.get('location')?.invalid && volunteerForm.get('location')?.touched) {
          <span class="error-text">La localisation est requise</span>
        }
      </div>

      <div class="form-group">
        <label for="email">ğŸ“§ Email</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          placeholder="email@example.com"
          [disabled]="isSubmitting"
        />
        @if (volunteerForm.get('email')?.invalid && volunteerForm.get('email')?.touched) {
          <span class="error-text">Email valide requis</span>
        }
      </div>

      <div class="form-group">
        <label for="password">ğŸ”’ Mot de passe</label>
        <div class="password-input-wrapper">
          <input
            [type]="showPassword ? 'text' : 'password'"
            id="password"
            formControlName="password"
            placeholder="Mot de passe"
            [disabled]="isSubmitting"
          />
          <button
            type="button"
            class="toggle-password"
            (click)="togglePasswordVisibility()"
            [disabled]="isSubmitting"
          >
            {{ showPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
          </button>
        </div>
        @if (volunteerForm.get('password')?.invalid && volunteerForm.get('password')?.touched) {
          <span class="error-text">Le mot de passe est requis</span>
        }
      </div>

      <div class="form-group">
        <label for="confirmPassword">ğŸ”’ Confirmer le mot de passe</label>
        <div class="password-input-wrapper">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmPassword"
            formControlName="confirmPassword"
            placeholder="Confirmer le mot de passe"
            [disabled]="isSubmitting"
          />
          <button
            type="button"
            class="toggle-password"
            (click)="toggleConfirmPasswordVisibility()"
            [disabled]="isSubmitting"
          >
            {{ showConfirmPassword ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
          </button>
        </div>
        @if (volunteerForm.get('confirmPassword')?.invalid && volunteerForm.get('confirmPassword')?.touched) {
          <span class="error-text">La confirmation du mot de passe est requise</span>
        }
        @if (volunteerForm.errors?.['passwordMismatch'] && volunteerForm.get('confirmPassword')?.touched) {
          <span class="error-text">Les mots de passe ne correspondent pas</span>
        }
      </div>

      <div class="form-actions">
        <button
          type="button"
          class="btn-secondary"
          (click)="goBack()"
          [disabled]="isSubmitting"
        >
          â† Retour
        </button>
        <button
          type="submit"
          class="btn-primary"
          [disabled]="volunteerForm.invalid || isSubmitting"
        >
          @if (!isSubmitting) {
            <span>âœ… S'inscrire</span>
          } @else {
            <span>â³ Inscription...</span>
          }
        </button>
      </div>
    </form>
  </div>
</div>
