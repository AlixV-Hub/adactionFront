<!-- src/app/addcollect/addcollect.component.html -->
<div class="collect-form-container">
  <form (ngSubmit)="saveCollect()" class="collect-form">
    
    <h2 class="form-title">â™»ï¸ Enregistrer une collecte</h2>

    <!-- Messages -->
    <div *ngIf="successMessage" class="alert alert-success">
      âœ… {{ successMessage }}
    </div>

    <div *ngIf="errorMessage" class="alert alert-error">
      âš ï¸ {{ errorMessage }}
    </div>

    <!-- Date -->
    <div class="form-group">
      <label for="collectDate">ğŸ“… Date de la collecte</label>
      <input
        type="date"
        id="collectDate"
        [(ngModel)]="collectDate"
        name="collectDate"
        required
      />
    </div>

    <!-- Ville -->
    <div class="form-group">
      <label for="cityId">ğŸ™ï¸ Ville</label>
      <select 
        id="cityId" 
        [(ngModel)]="cityId" 
        name="cityId" 
        required
      >
        <option [ngValue]="null">-- SÃ©lectionnez une ville --</option>
        <option *ngFor="let city of cities" [ngValue]="city.id">
          {{ city.name }}
        </option>
      </select>
    </div>

    <!-- Types de dÃ©chets -->
    <div class="form-group">
      <label>â™»ï¸ Types de dÃ©chets (en kg)</label>
      <div class="waste-types-list">
        <div *ngFor="let waste of wasteTypes" class="waste-item">
          <span class="waste-badge" [ngClass]="waste.classname">
            {{ getEmoji(waste) }}
          </span>
          <span class="waste-label">{{ waste.name }}</span>
          <div class="quantity-controls">
            <input
              type="number"
              min="0"
              step="0.1"
              [value]="getQuantity(waste.id)"
              (input)="updateQuantity(waste.id, $any($event.target).value)"
              [name]="'quantity' + waste.id"
              class="quantity-input"
            />
            <div class="quick-buttons">
              <button 
                type="button" 
                class="quick-btn"
                (click)="incrementQuantity(waste.id, 1)"
              >
                +1
              </button>
              <button 
                type="button" 
                class="quick-btn"
                (click)="incrementQuantity(waste.id, 5)"
              >
                +5
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- RÃ©capitulatif -->
    <div class="summary" [class.summary-empty]="!hasWasteSelected()">
      <h3>ğŸ“Š RÃ©capitulatif</h3>
      <p><strong>Total collectÃ©:</strong> {{ getTotalWeight() }} kg</p>
      <p><strong>Types avec quantitÃ©:</strong> {{ getSelectedWasteCount() }} / {{ wasteTypes.length }}</p>
      <p *ngIf="!hasWasteSelected()" class="warning-text">
        âš ï¸ Tous les types de dÃ©chets seront enregistrÃ©s avec une quantitÃ© de 0 kg
      </p>
    </div>

    <!-- Boutons -->
    <div class="form-actions">
      <button type="button" class="btn-secondary" (click)="resetForm()" [disabled]="isSubmitting">
        ğŸ”„ RÃ©initialiser
      </button>
      <button type="submit" class="btn-primary" [disabled]="!isFormValid() || isSubmitting">
        <span *ngIf="!isSubmitting">âœ… Enregistrer la collecte</span>
        <span *ngIf="isSubmitting">â³ Enregistrement...</span>
      </button>
    </div>
  </form>
</div>